<project name="Mono" default="dist" basedir="../../Mono">

	<property name="mono" value="test/js/mono.js"/>
	<copy file="src/mono.js" tofile="${mono}" overwrite="true"/>

	<loadfile property="chMsg" srcFile="src/vendor/Chrome/messages.js"/>
	<loadfile property="ffMsg" srcFile="src/vendor/Firefox/messages.js"/>
	<loadfile property="sfMsg" srcFile="src/vendor/Safari/messages.js"/>
	<loadfile property="opMsg" srcFile="src/vendor/Opera/messages.js"/>
	<loadfile property="gmMsg" srcFile="src/vendor/GM/messages.js"/>

	<loadfile property="chStorage" srcFile="src/vendor/Chrome/storage.js"/>
	<loadfile property="ffStorage" srcFile="src/vendor/Firefox/storage.js"/>
	<loadfile property="gmStorage" srcFile="src/vendor/GM/storage.js"/>
	<loadfile property="uniStorage" srcFile="src/vendor/Uni/storage.js"/>

	<replace file="${mono}" token="//@ChromeMsg" value="${chMsg}"/>
	<replace file="${mono}" token="//@FirefoxMsg" value="${ffMsg}"/>
	<replace file="${mono}" token="//@SafariMsg" value="${sfMsg}"/>
	<replace file="${mono}" token="//@OperaMsg" value="${opMsg}"/>
	<replace file="${mono}" token="//@GmMsg" value="${gmMsg}"/>

	<replace file="${mono}" token="//@ChromeStorage" value="${chStorage}"/>
	<replace file="${mono}" token="//@FirefoxStorage" value="${ffStorage}"/>
	<replace file="${mono}" token="//@GmStorage" value="${gmStorage}"/>
	<replace file="${mono}" token="//@UniStorage" value="${uniStorage}"/>

	<!-- FF Lib -->

	<property name="monoLib" value="test/vendor/firefox/lib/monoLib.js"/>
	<copy file="src/vendor/Firefox/lib/monoLib.js" tofile="${monoLib}" overwrite="true"/>

	<loadfile property="ffLibStorage" srcFile="src/vendor/Firefox/lib/storage.js"/>
	<loadfile property="ffLibUtils" srcFile="src/vendor/Firefox/lib/utils.js"/>

	<replace file="${monoLib}" token="//@FfStorage" value="${ffLibStorage}"/>
	<replace file="${monoLib}" token="//@FfUtils" value="${ffLibUtils}"/>

	<!-- /FF Lib -->

</project>
